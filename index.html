<!DOCTYPE html><html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>θで傾きを変える一次関数可視化</title>
<style>
  body { background:#0f1724; color:#e6eef8; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; padding:20px; }
  h1 { font-size:20px; margin-bottom:10px; text-align:center; }
  svg { border:1px solid #333; background:#0b1220; width:90%; height:400px; }
  .controls { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:10px; }
  label { font-size:14px; }
  input[type=range] { width:200px; }
</style>
</head>
<body><h1>θを変えて一次関数の傾きを三角形で可視化</h1><div class="controls">
  <label>角度 θ (deg): <span id="thetaVal">45</span>
    <input type="range" id="thetaRange" min="-80" max="80" step="1" value="45">
  </label>
  <label>底辺 x: <span id="xVal">2.0</span>
    <input type="range" id="xRange" min="0.5" max="10" step="0.1" value="2">
  </label>
</div><svg id="svg" viewBox="0 0 10 10" preserveAspectRatio="xMidYMid meet"></svg>

<script>
const svg = document.getElementById('svg');
const thetaRange = document.getElementById('thetaRange');
const thetaVal = document.getElementById('thetaVal');
const xRange = document.getElementById('xRange');
const xVal = document.getElementById('xVal');

let state = {theta:45, x:2};

function draw(){
  while(svg.lastChild) svg.removeChild(svg.lastChild);

  const theta = state.theta;
  const x = state.x;
  const m = Math.tan(theta*Math.PI/180);
  const y = m*x;

  // 座標軸
  const axisX = document.createElementNS("http://www.w3.org/2000/svg","line");
  axisX.setAttribute('x1',0); axisX.setAttribute('y1',0);
  axisX.setAttribute('x2',10); axisX.setAttribute('y2',0);
  axisX.setAttribute('stroke','#888'); svg.appendChild(axisX);

  const axisY = document.createElementNS("http://www.w3.org/2000/svg","line");
  axisY.setAttribute('x1',0); axisY.setAttribute('y1',0);
  axisY.setAttribute('x2',0); axisY.setAttribute('y2',10);
  axisY.setAttribute('stroke','#888'); svg.appendChild(axisY);

  // 線 y = m*x
  const line = document.createElementNS("http://www.w3.org/2000/svg","line");
  line.setAttribute('x1',0); line.setAttribute('y1',0);
  line.setAttribute('x2',x*3); line.setAttribute('y2',m*x*3);
  line.setAttribute('stroke','#6ee7b7'); line.setAttribute('stroke-width',0.05);
  svg.appendChild(line);

  // 三角形
  const tri = document.createElementNS("http://www.w3.org/2000/svg","polygon");
  tri.setAttribute('points',`
    0,0 
    ${x},0 
    ${x},${y}
  `);
  tri.setAttribute('fill','rgba(245,158,11,0.4)');
  tri.setAttribute('stroke','#f59e0b');
  tri.setAttribute('stroke-width','0.05');
  svg.appendChild(tri);

  // 底辺・高さラベル
  const baseLabel = document.createElementNS("http://www.w3.org/2000/svg","text");
  baseLabel.setAttribute('x', x/2); baseLabel.setAttribute('y', -0.3);
  baseLabel.setAttribute('fill','#f59e0b'); baseLabel.setAttribute('font-size','0.3'); baseLabel.textContent = `base = ${x.toFixed(2)}`;
  svg.appendChild(baseLabel);

  const heightLabel = document.createElementNS("http://www.w3.org/2000/svg","text");
  heightLabel.setAttribute('x', x+0.1); heightLabel.setAttribute('y', y/2);
  heightLabel.setAttribute('fill','#f59e0b'); heightLabel.setAttribute('font-size','0.3'); heightLabel.textContent = `height = ${y.toFixed(2)}`;
  svg.appendChild(heightLabel);

  // θ表示
  const thetaLabel = document.createElementNS("http://www.w3.org/2000/svg","text");
  thetaLabel.setAttribute('x', 0.1); thetaLabel.setAttribute('y', 0.5);
  thetaLabel.setAttribute('fill','#6ee7b7'); thetaLabel.setAttribute('font-size','0.4'); thetaLabel.textContent = `θ = ${theta}° (m = ${m.toFixed(2)})`;
  svg.appendChild(thetaLabel);
}

thetaRange.addEventListener('input', e=>{
  state.theta = parseFloat(e.target.value);
  thetaVal.textContent = state.theta;
  draw();
});
xRange.addEventListener('input', e=>{
  state.x = parseFloat(e.target.value);
  xVal.textContent = state.x.toFixed(2);
  draw();
});

draw();
</script></body>
</html>
